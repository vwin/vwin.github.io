<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta name="baidu-site-verification" content="code-w6zMFQOLpu"><meta name="referrer" content="strict-origin-when-cross-origin"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=yes,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>压测-线上全链路压测实践总结篇 | 予乐</title><meta name="description" content="总结：为什么要做线上全链路压测？典型应用场景以及5种典型的线上压测方案，全链路压测的方法论，典型性能问题总结"><meta property="og:type" content="article"><meta property="og:title" content="压测-线上全链路压测实践总结篇"><meta property="og:url" content="http://vwin.github.io/2022/09/15/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/index.html"><meta property="og:site_name" content="V&#39;s BLOG"><meta property="og:description" content="总结：为什么要做线上全链路压测？典型应用场景以及5种典型的线上压测方案，全链路压测的方法论，典型性能问题总结"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_7.png"><meta property="og:image" content="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_8.png"><meta property="og:image" content="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_9.png"><meta property="og:image" content="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img.png"><meta property="og:image" content="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_1.png"><meta property="og:image" content="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_2.png"><meta property="og:image" content="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_3.png"><meta property="og:image" content="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_4.png"><meta property="og:image" content="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_5.png"><meta property="og:image" content="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_6.png"><meta property="article:published_time" content="2022-09-15T07:51:01.000Z"><meta property="article:modified_time" content="2022-11-19T08:14:55.533Z"><meta property="article:author" content="V"><meta property="article:tag" content="压测"><meta property="article:tag" content="全链路"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_7.png"><link rel="canonical" href="http://vwin.github.io/2022/09/15/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/index.html"><link rel="alternate" href="/atom.xml" title="V&#39;s BLOG" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link href="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.3.5/dist/jquery.fancybox.min.css" rel="stylesheet"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?8082412711ea4c547c7fdf0e87eb19fb";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><meta name="generator" content="Hexo 6.0.0"></head><body class="main-center" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/vwin" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">will</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">Software Development Engineer in Test &amp; Devops Engineer</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Beijing, China</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="搜索"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">首页</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">归档</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">关于</span></a></li><li class="menu-item menu-item-bookmark"><a href="/bookmark"><i class="icon icon-book"></i> <span class="menu-title">书签</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/vwin" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="https://yuleweici.com/yuleweici/" target="_blank" title="Link" data-toggle="tooltip" data-placement="top"><i class="icon icon-link"></i></a></li><li><a href="mailto:crazyboyspecial@qq.com" target="_blank" title="Email" data-toggle="tooltip" data-placement="top"><i class="icon icon-email"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">公告</h3><div class="widget-body"><div id="board"><div class="content"><p>欢迎交流与分享经验.<br><a style="color:red" target="_blank" href="https://yuleweici.com/yuleweici-vuepress/">博客-Vuepress</a><br><a style="color:green" target="_blank" href="http://yuleweici.com/yuleweici-docsify/#/">博客-Docsify</a></p></div></div></div></div><div class="widget"><h3 class="widget-title">分类</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E4%BD%9C/">工作</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a><span class="category-list-count">60</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B5%8B%E8%AF%95/">测试</a><span class="category-list-count">25</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB/">生活</a><span class="category-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">标签</h3><div class="widget-body"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AI%E8%AF%84%E6%B5%8B/" rel="tag">AI评测</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI/" rel="tag">CI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Conan/" rel="tag">Conan</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Derrick/" rel="tag">Derrick</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Devops/" rel="tag">Devops</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Go/" rel="tag">Go</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Grafana/" rel="tag">Grafana</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/" rel="tag">HTML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IaaS/" rel="tag">IaaS</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Iaas/" rel="tag">Iaas</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jenkins/" rel="tag">Jenkins</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Prometheus/" rel="tag">Prometheus</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/QPS/" rel="tag">QPS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TPS/" rel="tag">TPS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UI%E8%87%AA%E5%8A%A8%E5%8C%96/" rel="tag">UI自动化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/" rel="tag">Ubuntu</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aio/" rel="tag">aio</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/airtest/" rel="tag">airtest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bio/" rel="tag">bio</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bootstrap/" rel="tag">bootstrap</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/broker/" rel="tag">broker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/buffer/" rel="tag">buffer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/" rel="tag">c++</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cached/" rel="tag">cached</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/celery/" rel="tag">celery</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cmake/" rel="tag">cmake</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cnpm/" rel="tag">cnpm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/consumer/" rel="tag">consumer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/date/" rel="tag">date</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/datetime/" rel="tag">datetime</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/describe/" rel="tag">describe</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dict/" rel="tag">dict</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/element-ui/" rel="tag">element ui</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flask/" rel="tag">flask</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fn/" rel="tag">fn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fp/" rel="tag">fp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/free/" rel="tag">free</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/geojson/" rel="tag">geojson</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github-pages/" rel="tag">github pages</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/" rel="tag">go</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gunicorn/" rel="tag">gunicorn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop/" rel="tag">hadoop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/" rel="tag">http</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios/" rel="tag">ios</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdk/" rel="tag">jdk</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jmeter/" rel="tag">jmeter</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jre/" rel="tag">jre</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json/" rel="tag">json</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jupyter-notebook/" rel="tag">jupyter notebook</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k6/" rel="tag">k6</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kafka/" rel="tag">kafka</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kafka-topic-sh/" rel="tag">kafka-topic.sh</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lambda/" rel="tag">lambda</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/laravel/" rel="tag">laravel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/list/" rel="tag">list</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/locust/" rel="tag">locust</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/makefile/" rel="tag">makefile</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/metaclass/" rel="tag">metaclass</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mfs/" rel="tag">mfs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/next/" rel="tag">next</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nio/" rel="tag">nio</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nmake/" rel="tag">nmake</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/paramiko/" rel="tag">paramiko</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/partition/" rel="tag">partition</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pdf/" rel="tag">pdf</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/perf/" rel="tag">perf</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/" rel="tag">php</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php5-fpm/" rel="tag">php5-fpm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php7-fpm/" rel="tag">php7-fpm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pip/" rel="tag">pip</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pytest/" rel="tag">pytest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pythonic/" rel="tag">pythonic</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/qgis/" rel="tag">qgis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/re/" rel="tag">re</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/replica/" rel="tag">replica</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/roc/" rel="tag">roc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/samba/" rel="tag">samba</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scp/" rel="tag">scp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/seaweedfs/" rel="tag">seaweedfs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sorted/" rel="tag">sorted</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spark/" rel="tag">spark</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/" rel="tag">ssh</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sudo/" rel="tag">sudo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/supervisor/" rel="tag">supervisor</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/systemtap/" rel="tag">systemtap</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/time/" rel="tag">time</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/timeout/" rel="tag">timeout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tmux/" rel="tag">tmux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tn/" rel="tag">tn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tp/" rel="tag">tp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/" rel="tag">ubuntu</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/unittest/" rel="tag">unittest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/websocket/" rel="tag">websocket</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zip/" rel="tag">zip</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%91/" rel="tag">云</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" rel="tag">人工智能</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BF%9D%E9%99%A9/" rel="tag">保险</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A8%E9%93%BE%E8%B7%AF/" rel="tag">全链路</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%87%BD%E6%95%B0/" rel="tag">函数</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" rel="tag">分布式</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E6%94%AF%E7%AD%96%E7%95%A5/" rel="tag">分支策略</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" rel="tag">单例模式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%95%E6%B5%8B/" rel="tag">单测</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%8B%E6%B5%8B/" rel="tag">压测</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%90%8E%E5%8F%B0/" rel="tag">后台</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%90%8E%E5%8F%B0%E5%85%B3%E7%B3%BB/" rel="tag">后台关系</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90/" rel="tag">域名解析</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" rel="tag">大数据</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%B4%E6%96%87%E4%BB%B6/" rel="tag">头文件</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%98%E5%82%A8/" rel="tag">存储</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/" rel="tag">性能分析</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/" rel="tag">性能测试</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/" rel="tag">持续集成</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F/" rel="tag">排序</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8F%92%E4%BB%B6/" rel="tag">插件</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%99%E7%A8%8B/" rel="tag">教程</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97/" rel="tag">斐波那契数列</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E6%9C%9F/" rel="tag">日期</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%B6%E9%97%B4/" rel="tag">时间</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8B%E8%AF%95/" rel="tag">测试</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%81%AB%E7%84%B0%E5%9B%BE/" rel="tag">火焰图</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%B5%E5%BD%B1/" rel="tag">电影</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98/" rel="tag">百度网盘</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%91%E6%8E%A7/" rel="tag">监控</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9F%A9%E9%98%B5/" rel="tag">矩阵</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83/" rel="tag">网络环境</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%87%AA%E5%8A%A8%E9%A9%BE%E9%A9%B6/" rel="tag">自动驾驶</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A1%8C%E6%94%BF%E5%8C%BA/" rel="tag">行政区</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%8D%E4%BA%91/" rel="tag">词云</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%AD%E6%B3%95%E7%B3%96/" rel="tag">语法糖</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B1%86%E7%93%A3/" rel="tag">豆瓣</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/" rel="tag">责任链模式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%92%E5%BD%92/" rel="tag">递归</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%81%93%E6%A0%BC%E6%8B%89%E6%96%AF/" rel="tag">道格拉斯</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%97%AD%E5%8C%85/" rel="tag">闭包</a><span class="tag-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">标签云</h3><div class="widget-body tagcloud"><a href="/tags/AI%E8%AF%84%E6%B5%8B/" style="font-size:13px">AI评测</a> <a href="/tags/C/" style="font-size:13.29px">C++</a> <a href="/tags/CI/" style="font-size:13px">CI</a> <a href="/tags/Conan/" style="font-size:13px">Conan</a> <a href="/tags/Derrick/" style="font-size:13px">Derrick</a> <a href="/tags/Devops/" style="font-size:13px">Devops</a> <a href="/tags/Go/" style="font-size:13px">Go</a> <a href="/tags/Grafana/" style="font-size:13px">Grafana</a> <a href="/tags/HTML/" style="font-size:13px">HTML</a> <a href="/tags/IaaS/" style="font-size:13.29px">IaaS</a> <a href="/tags/Iaas/" style="font-size:13.14px">Iaas</a> <a href="/tags/Jenkins/" style="font-size:13.14px">Jenkins</a> <a href="/tags/Prometheus/" style="font-size:13px">Prometheus</a> <a href="/tags/Python/" style="font-size:13.14px">Python</a> <a href="/tags/QPS/" style="font-size:13px">QPS</a> <a href="/tags/TPS/" style="font-size:13px">TPS</a> <a href="/tags/UI%E8%87%AA%E5%8A%A8%E5%8C%96/" style="font-size:13px">UI自动化</a> <a href="/tags/Ubuntu/" style="font-size:13px">Ubuntu</a> <a href="/tags/aio/" style="font-size:13px">aio</a> <a href="/tags/airtest/" style="font-size:13px">airtest</a> <a href="/tags/bio/" style="font-size:13px">bio</a> <a href="/tags/bootstrap/" style="font-size:13px">bootstrap</a> <a href="/tags/broker/" style="font-size:13px">broker</a> <a href="/tags/buffer/" style="font-size:13px">buffer</a> <a href="/tags/c/" style="font-size:13.14px">c++</a> <a href="/tags/cached/" style="font-size:13px">cached</a> <a href="/tags/celery/" style="font-size:13px">celery</a> <a href="/tags/cmake/" style="font-size:13px">cmake</a> <a href="/tags/cnpm/" style="font-size:13px">cnpm</a> <a href="/tags/consumer/" style="font-size:13px">consumer</a> <a href="/tags/date/" style="font-size:13px">date</a> <a href="/tags/datetime/" style="font-size:13px">datetime</a> <a href="/tags/describe/" style="font-size:13px">describe</a> <a href="/tags/dict/" style="font-size:13px">dict</a> <a href="/tags/docker/" style="font-size:13px">docker</a> <a href="/tags/element-ui/" style="font-size:13px">element ui</a> <a href="/tags/flask/" style="font-size:13px">flask</a> <a href="/tags/fn/" style="font-size:13px">fn</a> <a href="/tags/fp/" style="font-size:13px">fp</a> <a href="/tags/free/" style="font-size:13px">free</a> <a href="/tags/geojson/" style="font-size:13px">geojson</a> <a href="/tags/git/" style="font-size:13px">git</a> <a href="/tags/github/" style="font-size:13px">github</a> <a href="/tags/github-pages/" style="font-size:13px">github pages</a> <a href="/tags/go/" style="font-size:13px">go</a> <a href="/tags/gunicorn/" style="font-size:13px">gunicorn</a> <a href="/tags/hadoop/" style="font-size:13px">hadoop</a> <a href="/tags/hexo/" style="font-size:13.29px">hexo</a> <a href="/tags/http/" style="font-size:13px">http</a> <a href="/tags/ios/" style="font-size:13px">ios</a> <a href="/tags/jdk/" style="font-size:13px">jdk</a> <a href="/tags/jmeter/" style="font-size:13.29px">jmeter</a> <a href="/tags/jre/" style="font-size:13px">jre</a> <a href="/tags/json/" style="font-size:13px">json</a> <a href="/tags/jupyter-notebook/" style="font-size:13px">jupyter notebook</a> <a href="/tags/k6/" style="font-size:13px">k6</a> <a href="/tags/kafka/" style="font-size:13.14px">kafka</a> <a href="/tags/kafka-topic-sh/" style="font-size:13px">kafka-topic.sh</a> <a href="/tags/lambda/" style="font-size:13.14px">lambda</a> <a href="/tags/laravel/" style="font-size:13px">laravel</a> <a href="/tags/linux/" style="font-size:13.86px">linux</a> <a href="/tags/list/" style="font-size:13px">list</a> <a href="/tags/locust/" style="font-size:13.14px">locust</a> <a href="/tags/makefile/" style="font-size:13px">makefile</a> <a href="/tags/metaclass/" style="font-size:13px">metaclass</a> <a href="/tags/mfs/" style="font-size:13px">mfs</a> <a href="/tags/mysql/" style="font-size:13px">mysql</a> <a href="/tags/next/" style="font-size:13.14px">next</a> <a href="/tags/nio/" style="font-size:13px">nio</a> <a href="/tags/nmake/" style="font-size:13px">nmake</a> <a href="/tags/npm/" style="font-size:13px">npm</a> <a href="/tags/paramiko/" style="font-size:13px">paramiko</a> <a href="/tags/partition/" style="font-size:13.14px">partition</a> <a href="/tags/pdf/" style="font-size:13px">pdf</a> <a href="/tags/perf/" style="font-size:13px">perf</a> <a href="/tags/php/" style="font-size:13px">php</a> <a href="/tags/php5-fpm/" style="font-size:13px">php5-fpm</a> <a href="/tags/php7-fpm/" style="font-size:13px">php7-fpm</a> <a href="/tags/pip/" style="font-size:13px">pip</a> <a href="/tags/pytest/" style="font-size:13px">pytest</a> <a href="/tags/python/" style="font-size:14px">python</a> <a href="/tags/pythonic/" style="font-size:13px">pythonic</a> <a href="/tags/qgis/" style="font-size:13px">qgis</a> <a href="/tags/re/" style="font-size:13px">re</a> <a href="/tags/replica/" style="font-size:13.14px">replica</a> <a href="/tags/roc/" style="font-size:13px">roc</a> <a href="/tags/samba/" style="font-size:13px">samba</a> <a href="/tags/scp/" style="font-size:13px">scp</a> <a href="/tags/seaweedfs/" style="font-size:13px">seaweedfs</a> <a href="/tags/sorted/" style="font-size:13px">sorted</a> <a href="/tags/spark/" style="font-size:13.57px">spark</a> <a href="/tags/ssh/" style="font-size:13.14px">ssh</a> <a href="/tags/sudo/" style="font-size:13px">sudo</a> <a href="/tags/supervisor/" style="font-size:13px">supervisor</a> <a href="/tags/systemtap/" style="font-size:13px">systemtap</a> <a href="/tags/time/" style="font-size:13px">time</a> <a href="/tags/timeout/" style="font-size:13px">timeout</a> <a href="/tags/tmux/" style="font-size:13px">tmux</a> <a href="/tags/tn/" style="font-size:13px">tn</a> <a href="/tags/tp/" style="font-size:13px">tp</a> <a href="/tags/ubuntu/" style="font-size:13.29px">ubuntu</a> <a href="/tags/unittest/" style="font-size:13px">unittest</a> <a href="/tags/vue/" style="font-size:13px">vue</a> <a href="/tags/websocket/" style="font-size:13px">websocket</a> <a href="/tags/zip/" style="font-size:13px">zip</a> <a href="/tags/%E4%BA%91/" style="font-size:13px">云</a> <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size:13px">人工智能</a> <a href="/tags/%E4%BF%9D%E9%99%A9/" style="font-size:13px">保险</a> <a href="/tags/%E5%85%A8%E9%93%BE%E8%B7%AF/" style="font-size:13px">全链路</a> <a href="/tags/%E5%87%BD%E6%95%B0/" style="font-size:13px">函数</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size:13.29px">分布式</a> <a href="/tags/%E5%88%86%E6%94%AF%E7%AD%96%E7%95%A5/" style="font-size:13px">分支策略</a> <a href="/tags/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" style="font-size:13px">单例模式</a> <a href="/tags/%E5%8D%95%E6%B5%8B/" style="font-size:13.29px">单测</a> <a href="/tags/%E5%8E%8B%E6%B5%8B/" style="font-size:13.14px">压测</a> <a href="/tags/%E5%90%8E%E5%8F%B0/" style="font-size:13px">后台</a> <a href="/tags/%E5%90%8E%E5%8F%B0%E5%85%B3%E7%B3%BB/" style="font-size:13px">后台关系</a> <a href="/tags/%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90/" style="font-size:13px">域名解析</a> <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" style="font-size:13.71px">大数据</a> <a href="/tags/%E5%A4%B4%E6%96%87%E4%BB%B6/" style="font-size:13px">头文件</a> <a href="/tags/%E5%AD%98%E5%82%A8/" style="font-size:13px">存储</a> <a href="/tags/%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/" style="font-size:13px">性能分析</a> <a href="/tags/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/" style="font-size:13.86px">性能测试</a> <a href="/tags/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/" style="font-size:13.14px">持续集成</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size:13px">排序</a> <a href="/tags/%E6%8F%92%E4%BB%B6/" style="font-size:13px">插件</a> <a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size:13px">教程</a> <a href="/tags/%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97/" style="font-size:13px">斐波那契数列</a> <a href="/tags/%E6%97%A5%E6%9C%9F/" style="font-size:13px">日期</a> <a href="/tags/%E6%97%B6%E9%97%B4/" style="font-size:13px">时间</a> <a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size:13.43px">测试</a> <a href="/tags/%E7%81%AB%E7%84%B0%E5%9B%BE/" style="font-size:13px">火焰图</a> <a href="/tags/%E7%94%B5%E5%BD%B1/" style="font-size:13px">电影</a> <a href="/tags/%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98/" style="font-size:13px">百度网盘</a> <a href="/tags/%E7%9B%91%E6%8E%A7/" style="font-size:13px">监控</a> <a href="/tags/%E7%9F%A9%E9%98%B5/" style="font-size:13px">矩阵</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size:13px">算法</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83/" style="font-size:13px">网络环境</a> <a href="/tags/%E8%87%AA%E5%8A%A8%E9%A9%BE%E9%A9%B6/" style="font-size:13.29px">自动驾驶</a> <a href="/tags/%E8%A1%8C%E6%94%BF%E5%8C%BA/" style="font-size:13px">行政区</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size:13.14px">设计模式</a> <a href="/tags/%E8%AF%8D%E4%BA%91/" style="font-size:13px">词云</a> <a href="/tags/%E8%AF%AD%E6%B3%95%E7%B3%96/" style="font-size:13px">语法糖</a> <a href="/tags/%E8%B1%86%E7%93%A3/" style="font-size:13px">豆瓣</a> <a href="/tags/%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/" style="font-size:13px">责任链模式</a> <a href="/tags/%E9%80%92%E5%BD%92/" style="font-size:13px">递归</a> <a href="/tags/%E9%81%93%E6%A0%BC%E6%8B%89%E6%96%AF/" style="font-size:13px">道格拉斯</a> <a href="/tags/%E9%97%AD%E5%8C%85/" style="font-size:13px">闭包</a></div></div><div class="widget"><h3 class="widget-title">归档</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">十一月 2022</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">九月 2022</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">八月 2022</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a><span class="archive-list-count">22</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">2</span></li></ul></div></div><div class="widget"><h3 class="widget-title">最新文章</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2022/11/19/ToB%E4%B8%9A%E5%8A%A1%E7%90%86%E8%A7%A3/" class="title">ToB业务理解</a></p><p class="item-date"><time datetime="2022-11-19T06:16:47.000Z" itemprop="datePublished">2022-11-19</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E6%B5%8B%E8%AF%95/">测试</a></p><p class="item-title"><a href="/2022/11/15/%E5%8E%8B%E6%B5%8B-%E5%9F%BA%E4%BA%8EK6%E7%9A%84web%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%92%8C%E5%AE%9E%E6%97%B6%E7%9B%91%E6%8E%A7%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" class="title">压测-基于K6的web性能测试和实时监控解决方案</a></p><p class="item-date"><time datetime="2022-11-15T08:38:42.000Z" itemprop="datePublished">2022-11-15</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></p><p class="item-title"><a href="/2022/11/14/%E8%87%AA%E5%8A%A8%E9%A9%BE%E9%A9%B6-GeoJson%E5%AD%A6%E4%B9%A0/" class="title">自动驾驶-GeoJson学习</a></p><p class="item-date"><time datetime="2022-11-14T08:50:42.000Z" itemprop="datePublished">2022-11-14</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></p><p class="item-title"><a href="/2022/11/14/%E8%87%AA%E5%8A%A8%E9%A9%BE%E9%A9%B6-QGIS%E4%BD%BF%E7%94%A8/" class="title">自动驾驶-QGIS使用</a></p><p class="item-date"><time datetime="2022-11-14T08:49:11.000Z" itemprop="datePublished">2022-11-14</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E6%B5%8B%E8%AF%95/">测试</a></p><p class="item-title"><a href="/2022/11/14/%E5%90%8E%E5%8F%B0%E6%B5%8B%E8%AF%95%E5%85%A5%E9%97%A8-%E5%A6%82%E4%BD%95%E5%81%9A%E5%90%8E%E5%8F%B0%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/" class="title">后台测试入门-如何做后台性能测试</a></p><p class="item-date"><time datetime="2022-11-14T05:31:58.000Z" itemprop="datePublished">2022-11-14</time></p></div></li></ul></div></div></div></aside><aside class="sidebar sidebar-toc collapse in" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><nav id="toc" class="article-toc"><h3 class="toc-title">文章目录</h3><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B"><span class="toc-number">1.</span> <span class="toc-text">什么是全链路压测</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%81%9A%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%EF%BC%9F"><span class="toc-number">2.</span> <span class="toc-text">为什么要做线上全链路压测？</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B8%E5%9E%8B%E7%9A%84%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">3.</span> <span class="toc-text">典型的线上全链路压测应用场景</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E7%A7%8D%E5%85%B8%E5%9E%8B%E7%BA%BF%E4%B8%8A%E5%8E%8B%E6%B5%8B%E6%96%B9%E6%A1%88"><span class="toc-number">4.</span> <span class="toc-text">五种典型线上压测方案</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%BF%E9%87%8C%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E6%96%B9%E6%A1%88"><span class="toc-number">4.1.</span> <span class="toc-text">阿里全链路压测方案</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%AF%E6%9F%A5%E8%AF%A2%E5%8D%95%E6%9C%BA%E6%88%BF%E6%94%B9%E4%BB%A3%E7%A0%81%E7%BA%BF%E4%B8%8A%E5%8E%8B%E6%B5%8B"><span class="toc-number">4.2.</span> <span class="toc-text">纯查询单机房改代码线上压测</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E5%BE%85%E4%B8%8A%E7%BA%BF-x2F-%E6%89%A9%E5%AE%B9%E7%B3%BB%E7%BB%9F%E8%BF%9B%E8%A1%8C%E7%BA%BF%E4%B8%8A%E5%8E%8B%E6%B5%8B"><span class="toc-number">4.3.</span> <span class="toc-text">利用待上线&#x2F; 扩容系统进行线上压测</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%99%E6%B5%81%E9%87%8F%E6%95%B0%E6%8D%AE%E9%9A%94%E7%A6%BB-%E6%B8%85%E5%BA%93%E7%BA%BF%E4%B8%8A%E5%8E%8B%E6%B5%8B%EF%BC%88%E7%B1%BB%E5%BD%B1%E5%AD%90%E5%BA%93%EF%BC%89"><span class="toc-number">4.4.</span> <span class="toc-text">写流量数据隔离+清库线上压测（类影子库）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E6%B5%81%E9%87%8F%E5%A0%86%E7%A7%AF%E5%8F%91%E9%80%81%E7%BA%BF%E4%B8%8A%E5%8E%8B%E6%B5%8B"><span class="toc-number">4.5.</span> <span class="toc-text">异步流量堆积发送线上压测</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E6%96%B9%E6%B3%95%E8%AE%BA%E6%80%BB%E7%BB%93"><span class="toc-number">5.</span> <span class="toc-text">全链路压测方法论总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E5%8C%96%E6%B5%81%E7%A8%8B"><span class="toc-number">5.1.</span> <span class="toc-text">标准化流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%B5%81%E7%A8%8B%E5%92%8C%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">5.2.</span> <span class="toc-text">核心流程和注意事项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A3%8E%E9%99%A9%E8%AF%84%E4%BC%B0-amp-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">5.3.</span> <span class="toc-text">风险评估&amp;解决方案</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B8%E5%9E%8B%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93"><span class="toc-number">6.</span> <span class="toc-text">典型性能问题总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#redis"><span class="toc-number">6.1.</span> <span class="toc-text">redis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%94%E7%94%A8"><span class="toc-number">6.2.</span> <span class="toc-text">应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A8%B3%E5%AE%9A%E6%80%A7-amp-%E5%81%A5%E5%A3%AE%E6%80%A7"><span class="toc-number">6.3.</span> <span class="toc-text">稳定性&amp;健壮性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%8B%E6%B5%8B%E5%B7%A5%E5%85%B7%E9%97%AE%E9%A2%98"><span class="toc-number">6.4.</span> <span class="toc-text">压测工具问题</span></a></li></ol></li></ol></nav></div></aside><main class="main" role="main"><div class="content"><article id="post-压测-线上全链路压测实践总结篇" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">压测-线上全链路压测实践总结篇</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/2022/09/15/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/" class="article-date"><time datetime="2022-09-15T07:51:01.000Z" itemprop="datePublished">2022-09-15</time> </a></span><span class="article-category"><i class="icon icon-folder"></i> <a class="article-category-link" href="/categories/%E6%B5%8B%E8%AF%95/">测试</a> </span><span class="article-tag"><i class="icon icon-tags"></i> <a class="article-tag-link-link" href="/tags/%E5%85%A8%E9%93%BE%E8%B7%AF/" rel="tag">全链路</a>, <a class="article-tag-link-link" href="/tags/%E5%8E%8B%E6%B5%8B/" rel="tag">压测</a> </span><span class="article-read hidden-xs"><i class="icon icon-eye-fill" aria-hidden="true"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span> </span></span><span class="post-comment"><i class="icon icon-comment"></i> <a href="/2022/09/15/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/#comments" class="article-comment-link">评论</a></span> <span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 3.9k(字)</span> <span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 13(分)</span></div></div><div class="article-entry marked-body" itemprop="articleBody"><p>总结：为什么要做线上全链路压测？典型应用场景以及5种典型的线上压测方案，全链路压测的方法论，典型性能问题总结</p><span id="more"></span><h1 id="什么是全链路压测"><a href="#什么是全链路压测" class="headerlink" title="什么是全链路压测"></a>什么是全链路压测</h1><p>全链路压测是可以在现网环境实施的尽可能模拟真实环境流量的场景化压测，通过全链路压测，业务可以探测系统级复杂链路的性能瓶颈，辅助其作出相应的容量规划。</p><p>随着分布式架构和业务快速发展给业务系统带来了不确定性，分布式环境的任何节点都可能成为瓶颈&#x2F;短板&#x2F;问题。拿如下这个简单系统为例，用户对系统的一次请求，经过负载均衡、接入层服务、逻辑服务，最终请求到了外部服务，同时产生的用户数据也被存储下来。<br><img src="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_7.png"><br>在这条链路中，其中任何一个服务节点或者存储节点出现性能瓶颈，都可能导致整个系统受到影响。</p><p><img src="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_8.png"></p><p>当然，在得出这条结论之前需要具备一些前提条件：第一、拥有“上帝视角”获取到了调用接口背后的链路拓扑图；第二、同时拥有完备的监控数据做支撑。而这些可能是我们日常进行普通压测所缺乏的。普通压测更多的关注在发压能力以及发压端，对于被压端却是黑盒的。普通压测与全链路压测的区别总结如下：<br><img src="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_9.png"></p><p>可见全链路压测的特点在于：</p><ol><li>支持脏数据隔离与流量隔离；</li><li>支持高负载等异常发现能力，实现压测任务自动化熔断；</li><li>支持压测接口背后依赖的的节点链路透视；</li><li>支持实时监控被压链路的指标数据；</li></ol><h1 id="为什么要做线上全链路压测？"><a href="#为什么要做线上全链路压测？" class="headerlink" title="为什么要做线上全链路压测？"></a>为什么要做线上全链路压测？</h1><p><img src="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img.png"></p><p>举一个典型例子：某大促期间，系统在0点，出现大面积瘫痪，重启后又瘫痪；</p><p>为什么出现这个问题？是系统间存在依赖关联，对整个全交易链条上的各个环节的系统承压能力不清楚。</p><p>最好的办法就是模拟完全的真实情况来做到提前实战演练。即线上全链路压测：</p><ul><li>提早发现问题，保障重大活动时系统稳定运行；</li><li>找出各个系统的性能瓶颈，明确优化目标；</li><li>精准的容量评估：压测结论作为申请扩容资源的依据，活动结束后再归还资源，这样做到成本最低化。</li></ul><h1 id="典型的线上全链路压测应用场景"><a href="#典型的线上全链路压测应用场景" class="headerlink" title="典型的线上全链路压测应用场景"></a>典型的线上全链路压测应用场景</h1><p><img src="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_1.png"></p><h1 id="五种典型线上压测方案"><a href="#五种典型线上压测方案" class="headerlink" title="五种典型线上压测方案"></a>五种典型线上压测方案</h1><p>简述几种典型的线上压测方案，并重点分析每种方案可能的风险和踩坑。</p><h2 id="阿里全链路压测方案"><a href="#阿里全链路压测方案" class="headerlink" title="阿里全链路压测方案"></a>阿里全链路压测方案</h2><p>通过模拟线上真实流量，对整条链路进行全方位、安全、真实的压测<br><img src="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_2.png"><br>核心实现思路是：通过压测流量全局识别、透传，数据进影子区域，且监控区分压测流程和业务流量。</p><ul><li>流量标记：业务系统、中间件改造，全链路标记压测流量</li><li>分区压测：识别压测流量，将流量转发到压测分区，隔离正常业务</li><li>影子表：识别压测流量，缓存和存储将压测数据落入影子表&#x2F;影子区域，不影响正常业务</li><li>监控：压测流量、业务流量，分开监控<br><img src="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_3.png"></li></ul><p>全链路压测，除技术挑战外，在团队协作上，还有两个难点：</p><ol><li><p>全链路流量梳理汇总：</p><ol><li>全链路发压的时候，并不是各压各的，而是需要一起梳理发压流量。比如春晚营销自己压测的时候，需要压5个接口，但是全链路的时候，有3个接口是被上游系统调用的，就不需要营销自己发压，只要接受上游服务的压力就好了。</li><li>对齐压测方案，比如单机房发压，要保证压同一个机房等。</li></ol></li><li><p>压测时的统筹把控：</p><ol><li>全链路压测涉及多个团队，几十个系统同时压测，因此需要整体统筹，分配每人的职责，包括发压，看监控等，一旦出现问题能快速发现，及时停止压力，联合定位问题。</li></ol></li></ol><h2 id="纯查询单机房改代码线上压测"><a href="#纯查询单机房改代码线上压测" class="headerlink" title="纯查询单机房改代码线上压测"></a>纯查询单机房改代码线上压测</h2><p>该方案是通过机房隔离，改代码上线到不承接线上流量的单机房，链路梳理，mock掉不可接受的下游第三方服务、mock掉造成写操作的逻辑，构造词表或引流进行压测。</p><p>目前我们大部分系统的查询接口线上压测，都是用这个方案。</p><p>虽然看上很安全，但是还有不少风险，主要体现在:</p><ul><li>下游系统风险：虽然被压系统与在线业务做了物理隔离，但该系统的下游通常也是真实线上环境，所以有很大的第三方风险。<ul><li>解决思路：梳理整体链路，压测时提前通知下游系统，尤其是公共服务，可根据情况mock一些下游服务；</li></ul></li><li>写操作梳理遗漏：<ul><li>该方案的前提是纯查询类的请求，需要业务梳理所有被压的接口，确保没有任何写操作，否则会引入脏数据。但实际上，我们很难梳理全一个接口和他请求的所有下游服务都没有写操作，一旦漏掉，就会带来线上脏数据。</li><li>几种典型的容易漏掉的写操作：<ul><li>缓存，查询接口通常都有缓存，如果压测时不注意，可能写进去的脏数据又被读到，影响线上;</li><li>统计BI类的数据，通常不在业务逻辑里，通过埋点或者日志来提取，很容易漏掉；</li></ul></li><li>解决思路：①梳理业务时，尤其注意这两类操作；②尽可能的使用内部同学账号，这样万一出现问题影响还可控;</li></ul></li><li>切流量不干净：<ul><li>部分模块链接入口不规范，可能导致切流量切不干净<ul><li>解决思路：检查切流量后的机房，确保无线上流量，尤其是要单机房上线改造代码的时候，保证不能影响到没切干净的流量。</li></ul></li><li>切流量，目前只能保证最上层被压模块切到单机房，如果没有”智能流量转发平台”（优先访问相同机房的机器，若访问失败再访问其他机房），下游业务的流量是切不走的，这种其实没有很好的解决下游模块的服务不可用风险。<ul><li>解决思路：被压测的所有系统都通过”智能流量转发平台”，流量低峰期压测，以减少服务不可用风险;</li></ul></li></ul></li><li>上线导致mock代码失效：<ul><li>这个问题在春节红包压测过程中就出现了，原本mock掉了下游发短信，但是因为压测过程中其它rd上线，覆盖了压测代码逻辑，导致压测流量请求了真实第三方，引起问题。</li><li>解决思路：<ul><li>这类风险在所有需要改压测代码的方案都存在，我们一定要规范压测流程， 周知到所有人这段时间不能上线；</li><li>尽可能的使用内部同学的账号，多重保障。</li></ul></li></ul></li></ul><h2 id="利用待上线-x2F-扩容系统进行线上压测"><a href="#利用待上线-x2F-扩容系统进行线上压测" class="headerlink" title="利用待上线&#x2F; 扩容系统进行线上压测"></a>利用待上线&#x2F; 扩容系统进行线上压测</h2><p>该方案算是类线上压测，在条件允许的情况下，利用待上线或者扩容的环境进行压测，通过构造的词表或者线上流量录制的词表进行发压，进行容量评估&#x2F;瓶颈定位&amp;解决，最终来保障活动稳定进行。</p><p>该方案相对安全，但是还是有一定风险，主要体现在:</p><ul><li><p>下游系统风险：虽然被压系统是待上线或者扩容的环境，但该系统的下游通常也是真实线上环境，所以有很大的第三方风险。</p><ul><li>解决思路：梳理整体链路，压测时提前通知下游系统，根据情况mock一些下游服务;</li></ul></li><li><p>数据风险：</p><ul><li>通常压测待上线系统都有写接口压测，而且是通过上线前清理数据的方式避免脏数据影响。但是这里还有三个风险：<ul><li>数据清理不干净，可能因为漏清部分数据导致影响线上;</li><li>连错数据库，通常我们预期连到扩容的数据库进行压测，但是一旦连接错了，连到线上，就会污染线上数据；</li><li>数据清理过快，导致数据库占用资源过高，影响线上；</li></ul></li><li>解决思路：一定要在压测的时候反复检查是否连对数据库，并且压测数据和线上数据隔离双重保证，清理数据时一定注意清理速度。</li></ul></li><li><p>环境不稳定风险：</p><ul><li>这个也是待上线系统独特的特点，因为没有线上流量，系统rd自运维，或者出现上线不规范的情况，这样很可能将压测特殊的代码或配置覆盖掉</li><li>比如：上线导致mock的第三方服务或数据库链接配置失效。</li><li>解决思路：每次压测的时候都一定要检查diff压测改造代码和配置。</li></ul></li></ul><h2 id="写流量数据隔离-清库线上压测（类影子库）"><a href="#写流量数据隔离-清库线上压测（类影子库）" class="headerlink" title="写流量数据隔离+清库线上压测（类影子库）"></a>写流量数据隔离+清库线上压测（类影子库）</h2><p>该方案是通过与在线业务隔离的压测数据，真实压测线上系统，事后清理压测脏数据。</p><p>比如：压测红包活动使用特殊号段userId，发券压测使用压测账号发测试券，事后清理脏数据。</p><p>该方案风险大，属于高危方案，风险是：</p><p>一旦失效，影响线上用户，资金安全，或污染线上数据，甚至导致在线业务不可用</p><p>解决思路：多重保证避免</p><ol><li>压测流量标记，透传;</li><li>压测账号隔离等，一定要反复检查请求是否符合预期，线上逻辑处理是否符合预期；</li><li>在压测工具和线上代码中添加校验检查，比如：压测流量不在指定数据范围内的流量拒掉。结合业务做风险分析，多重机制保证。</li></ol><h2 id="异步流量堆积发送线上压测"><a href="#异步流量堆积发送线上压测" class="headerlink" title="异步流量堆积发送线上压测"></a>异步流量堆积发送线上压测</h2><p>方案是：通过配置化控制缓冲池的消费速度进行压测。</p><p>最大的好处是，完全不增加额外的线上流量，使写操作的数据风险降到最低。</p><p>该方案最大的风险是：线上服务可用性，主要体现在两点:</p><p>积压释放的流量本身的可用性：</p><p>因为是积压释放，在大压力下可能导致服务异常处理失败，而失败的这部分流量是线上真实用户的，这样会降低系统的可用性。</p><p>解决思路：重试 or 补单 or 对账来解决；</p><p>对线上服务可用性：</p><p>可能会将系统压挂（原因是：通常写服务，数据库是无法切机房的，所以一旦堆积的流量把服务压挂，会严重影响线上）</p><p>解决思路：业务低峰期进行，以减轻风险。</p><h1 id="全链路压测方法论总结"><a href="#全链路压测方法论总结" class="headerlink" title="全链路压测方法论总结"></a>全链路压测方法论总结</h1><h2 id="标准化流程"><a href="#标准化流程" class="headerlink" title="标准化流程"></a>标准化流程</h2><p>明确压测目标，压测前、压测中和压测后的各个环节的checklist，是做好全链路压测的标准化流程。<br><img src="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_4.png"></p><h2 id="核心流程和注意事项"><a href="#核心流程和注意事项" class="headerlink" title="核心流程和注意事项"></a>核心流程和注意事项</h2><p>该核心流程描述了要做一次线上性能测试，整个过程中在什么时间点要做什么事，照着这个流程能保证我们线上性能测试能够有序且不会遗漏重要的东西。<br><img src="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_5.png"></p><h2 id="风险评估-amp-解决方案"><a href="#风险评估-amp-解决方案" class="headerlink" title="风险评估&amp;解决方案"></a>风险评估&amp;解决方案</h2><p>线上压测，就会对在线业务有影响，风险评估及解决方案总结：<br><img src="http://cdn.yuleweici.com/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/img_6.png"></p><h1 id="典型性能问题总结"><a href="#典型性能问题总结" class="headerlink" title="典型性能问题总结"></a>典型性能问题总结</h1><p>结合项目，压测遇到，较典型的性能问题，见下：</p><h2 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h2><ul><li><p>压力不均衡，有热点：构造的key总会落到一台机器上，形成热点（出现场景有：统计结果集中过期、统计设置过期时间、压测的统计词表、频繁读一个队列数据）–解决方法：key值打散</p></li><li><p>压力只在8000端口上，cpu使用率很高–解决方法：一是通过域名使用多端口访问，二是使用proxy，BGW或VIP方式，将压力打散；更推荐第二个方案；之前出现过域名平台低版本导致转发不均衡的问题。</p></li><li><p>cpu0核打满–解决方法：一是开启网卡多队列优化；二是扩容</p></li><li><p>内存达到80%–解决方法：一是修改程序，部分业务功能迁移到别的redis集群；二是扩容</p></li></ul><h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><ul><li><p>队列积压–解决方法：一是增加消费线程数，或改为批量处理；二是扩容，增加消费模块的机器；三是增加开关控制，仅活动事件不入上述队列。</p></li><li><p>模块间采用http调用方式耗时长–解决方法：改为nio方式调用，耗时节省约</p></li><li><p>前置校验补全规则分析，高压力下耗时长，单机3000qps耗时170ms–解决方法：若非必要流程可去掉，活动请求不过校验补全规则。</p></li><li><p>系统开关控制查redis或DB的功能，高压力下配置成查redis，会提升系统性能。</p></li><li><p>多个任务处理共用一个线程池，导致任务积压影响性能或其他业务–</p></li><li><p>规则引擎耗时长</p></li><li><p>youngGC，fullGC次数多且耗时长，影响性能</p></li><li><p>凌晨切日志或有定时任务，影响性能</p></li><li><p>因机器问题导致系统雪崩：一台机器性能差，报警无可用连接后，平响瞬间升高，一系列连锁反应，会拖垮应用–解决方案：通过逐步升高压力，摘掉报出无可用连接的机器</p></li><li><p>联合其他业务压测：词表影响在线业务，及变量传默认值，需改造后压测，否则影响压测效果；压测结束后恢复需求状态。</p></li></ul><h2 id="稳定性-amp-健壮性"><a href="#稳定性-amp-健壮性" class="headerlink" title="稳定性&amp;健壮性"></a>稳定性&amp;健壮性</h2><ul><li><p>开启重试判断后，系统出现雪崩；一般高压力活动场景，不会增加重试机制，会大大影响性能。若有重试，系统应防范雪崩发生。</p></li><li><p>压力超过一定范围后，持续压测出现模块挂掉，耗时瞬间升高情况–原因：一是规则引擎耗时长，二是机器问题。</p></li><li><p>高压力下频繁操作起停规则，耗时瞬间上升</p></li><li><p>多个任务处理共用一个线程池，导致任务积压，影响其他业务–解决方法：一是各个任务间线程池隔离；二是活动机器和在线业务机器全部隔离；三是监控本地队列，数据有积压则报警</p></li></ul><h2 id="压测工具问题"><a href="#压测工具问题" class="headerlink" title="压测工具问题"></a>压测工具问题</h2><ul><li><p>压力不稳–原因有：一是连接的redis跨机房、二是达到发压力极限，发压机器cpu打满；目前单机发压可达5kqps。</p></li><li><p>压不上去–可调整slave个数，单机一般配置6个slave没问题。</p></li><li><p>压力工具监控，压力超过一定范围后，qps计算不准</p></li></ul></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="http://vwin.github.io/2022/09/15/%E5%8E%8B%E6%B5%8B-%E7%BA%BF%E4%B8%8A%E5%85%A8%E9%93%BE%E8%B7%AF%E5%8E%8B%E6%B5%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E7%AF%87/" title="压测-线上全链路压测实践总结篇" target="_blank" rel="external">http://vwin.github.io/2022/09/15/压测-线上全链路压测实践总结篇/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/vwin" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/vwin" target="_blank"><span class="text-dark">will</span><small class="ml-1x">Software Development Engineer in Test &amp; Devops Engineer</small></a></h3><div>测试开发架构师 &amp;&amp; 工程效能专家</div></div></figure></div></div></div></article><section id="comments"></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/2022/09/16/%E8%87%AA%E5%8A%A8%E9%A9%BE%E9%A9%B6-%E9%81%93%E6%A0%BC%E6%8B%89%E6%96%AF%E6%99%AE%E5%85%8B-Douglas-Peuker-%E7%AE%97%E6%B3%95%E5%8F%8Apython%E5%AE%9E%E7%8E%B0/" title="自动驾驶-道格拉斯普克(Douglas-Peuker)算法及python实现"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a></li><li class="next"><a href="/2022/09/15/%E4%BA%91IaaS%E6%B5%8B%E8%AF%95%E7%B3%BB%E5%88%97%E4%B8%80%E5%88%A9%E7%94%A8SystemTap%E6%A8%A1%E6%8B%9F%E7%A3%81%E7%9B%98%E6%95%85%E9%9A%9C/" title="云IaaS测试系列一利用SystemTap模拟磁盘故障"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li><li class="toggle-toc"><a class="toggle-btn" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button"><span>[&nbsp;</span><span>文章目录</span> <i class="text-collapsed icon icon-anchor"></i> <i class="text-in icon icon-close"></i> <span>]</span></a></li></ul><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/vwin" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="https://yuleweici.com/yuleweici/" target="_blank" title="Link" data-toggle="tooltip" data-placement="top"><i class="icon icon-link"></i></a></li><li><a href="mailto:crazyboyspecial@qq.com" target="_blank" title="Email" data-toggle="tooltip" data-placement="top"><i class="icon icon-email"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul><div class="copyright">&copy; 2022 V</div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>!function(T){T.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(未命名)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}}(window)</script><script src="/js/insight.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.3.5/dist/jquery.fancybox.min.js"></script><script>$(document).ready((function(){$("article img").not("[hidden]").not(".panel-body img").each((function(){var a=$(this),t=a.attr("alt"),n=a.parent("a");if(n.length<1){var e=this.getAttribute("src"),r=e.lastIndexOf("?");-1!=r&&(e=e.substring(0,r)),n=a.wrap('<a href="'+e+'"></a>').parent("a")}n.attr("data-fancybox","images"),t&&n.attr("data-caption",t)})),$().fancybox({selector:'[data-fancybox="images"]',hash:!1,loop:!1})}))</script></body></html>